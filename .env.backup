# Go Loyalty & Benefits Platform - Environment Configuration
# Copy this file to .env and update values as needed

# =============================================================================
# COMMON CONFIGURATION
# =============================================================================

# Application
APP_NAME=loyalty-svc
APP_HTTP_ADDR=:8080
APP_LOG_LEVEL=info
APP_SHUTDOWN_TIMEOUT=15s
APP_ENVIRONMENT=development
APP_VERSION=1.0.0

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL
AUTH-SVC_DATABASE_POSTGRES_HOST=localhost
AUTH-SVC_DATABASE_POSTGRES_PORT=5432
AUTH-SVC_DATABASE_POSTGRES_DATABASE=loyalty
AUTH-SVC_DATABASE_POSTGRES_USERNAME=loyalty
AUTH-SVC_DATABASE_POSTGRES_PASSWORD=loyalty
AUTH-SVC_DATABASE_POSTGRES_SSL_MODE=disable
AUTH-SVC_DATABASE_POSTGRES_MAX_CONNS=25

# MongoDB
MONGO_URI=mongodb://localhost:27017
MONGO_DB=loyalty
MONGO_TIMEOUT=10s

# Redis
REDIS_ADDR=localhost:6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_POOL_SIZE=10

# =============================================================================
# KAFKA CONFIGURATION
# =============================================================================

# Kafka Brokers (comma-separated)
KAFKA_BROKERS=localhost:9092
KAFKA_CLIENT_ID=loyalty-svc
KAFKA_GROUP_ID=loyalty-svc
KAFKA_VERSION=2.8.0

# Kafka Topics
KAFKA_TOPICS_POINTS_EARNED=points.earned.v1
KAFKA_TOPICS_REDEMPTION_REQUEST=redemption.requested.v1
KAFKA_TOPICS_REDEMPTION_COMPLETE=redemption.completed.v1
KAFKA_TOPICS_REDEMPTION_FAILED=redemption.failed.v1

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# JWT
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_ISSUER=go-loyalty
JWT_AUDIENCE=go-loyalty-clients
JWT_EXPIRATION=24h

# mTLS (mutual TLS)
MTLS_ENABLED=false
MTLS_CERT_FILE=
MTLS_KEY_FILE=
MTLS_CA_FILE=

# =============================================================================
# OBSERVABILITY CONFIGURATION
# =============================================================================

# OpenTelemetry
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=loyalty-svc
OTEL_TRACES_SAMPLER=always_on
OTEL_METRICS_EXPORTER=prometheus

# =============================================================================
# SERVICE-SPECIFIC CONFIGURATION
# =============================================================================

# Auth Service
AUTH-SVC-APP_NAME=auth-svc
AUTH-SVC-APP_HTTP_ADDR=:8081
AUTH-SVC-APP_LOG_LEVEL=info

# Loyalty Service
LOYALTY_SVC_APP_NAME=loyalty-svc
LOYALTY_SVC_APP_HTTP_ADDR=:8082
LOYALTY_SVC_APP_LOG_LEVEL=info

# Catalog Service
CATALOG_SVC_APP_NAME=catalog-svc
CATALOG_SVC_APP_HTTP_ADDR=:8083
CATALOG_SVC_APP_LOG_LEVEL=info

# Redemption Service
REDEMPTION_SVC_APP_NAME=redemption-svc
REDEMPTION_SVC_APP_HTTP_ADDR=:8084
REDEMPTION_SVC_APP_LOG_LEVEL=info

# Partner Gateway Service
PARTNER_GW_APP_NAME=partner-gateway
PARTNER_GW_APP_HTTP_ADDR=:8085
PARTNER_GW_APP_LOG_LEVEL=info

# Notification Service
NOTIFY_SVC_APP_NAME=notify-svc
NOTIFY_SVC_APP_HTTP_ADDR=:8086
NOTIFY_SVC_APP_LOG_LEVEL=info

# =============================================================================
# PARTNER INTEGRATION CONFIGURATION
# =============================================================================

# Gift Card Partner
GIFTCO_SOAP_ENDPOINT=https://api.giftco.com/soap
GIFTCO_USERNAME=loyalty_user
GIFTCO_PASSWORD=secret
GIFTCO_TIMEOUT=30s
GIFTCO_RETRIES=3

# Travel Partner
TRAVELCO_SOAP_ENDPOINT=https://api.travelco.com/soap
TRAVELCO_USERNAME=loyalty_user
TRAVELCO_PASSWORD=secret
TRAVELCO_TIMEOUT=45s
TRAVELCO_RETRIES=2

# Retail Partner
RETAILCO_SOAP_ENDPOINT=https://api.retailco.com/soap
RETAILCO_USERNAME=loyalty_user
RETAILCO_PASSWORD=secret
RETAILCO_TIMEOUT=20s
RETAILCO_RETRIES=3

# Entertainment Partner
ENTERTAINMENTCO_SOAP_ENDPOINT=https://api.entertainmentco.com/soap
ENTERTAINMENTCO_USERNAME=loyalty_user
ENTERTAINMENTCO_PASSWORD=secret
ENTERTAINMENTCO_TIMEOUT=25s
ENTERTAINMENTCO_RETRIES=3

# =============================================================================
# NOTIFICATION CONFIGURATION
# =============================================================================

# Email Service (SMTP)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=noreply@loyalty.com

# SMS Service (Twilio)
TWILIO_ACCOUNT_SID=your-account-sid
TWILIO_AUTH_TOKEN=your-auth-token
TWILIO_FROM_NUMBER=+1234567890

# Push Notifications
PUSH_PRIVATE_KEY_PATH=/path/to/private-key.p8
PUSH_KEY_ID=your-key-id
PUSH_TEAM_ID=your-team-id
PUSH_BUNDLE_ID=com.loyalty.app

# =============================================================================
# BUSINESS LOGIC CONFIGURATION
# =============================================================================

# Points Calculation
POINTS_BASE_RATE=1.0
POINTS_RESTAURANT_MULTIPLIER=3.0
POINTS_GROCERY_MULTIPLIER=2.5
POINTS_GAS_MULTIPLIER=2.0
POINTS_DEPARTMENT_MULTIPLIER=1.5
POINTS_DEFAULT_MULTIPLIER=1.0

# Tier System
TIER_BRONZE_THRESHOLD=0
TIER_SILVER_THRESHOLD=5000
TIER_GOLD_THRESHOLD=15000
TIER_PLATINUM_THRESHOLD=50000

# Redemption Limits
MAX_DAILY_REDEMPTIONS=10
MAX_POINTS_PER_REDEMPTION=10000
MIN_POINTS_PER_REDEMPTION=100

# =============================================================================
# RESILIENCE CONFIGURATION
# =============================================================================

# Circuit Breaker
CIRCUIT_BREAKER_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT=60s
CIRCUIT_BREAKER_MAX_FAILURES=3

# Retry Configuration
RETRY_MAX_ATTEMPTS=3
RETRY_INITIAL_DELAY=100ms
RETRY_MAX_DELAY=5s
RETRY_MULTIPLIER=2.0

# Rate Limiting
RATE_LIMIT_REQUESTS_PER_SECOND=100
RATE_LIMIT_BURST_SIZE=200

# =============================================================================
# CACHING CONFIGURATION
# =============================================================================

# Redis Cache TTLs
CACHE_BENEFITS_TTL=300s
CACHE_USER_BALANCE_TTL=60s
CACHE_PARTNER_CONFIG_TTL=600s
CACHE_EMAIL_TEMPLATES_TTL=3600s

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================

# Debug Mode
DEBUG_ENABLED=true
DEBUG_PORT=40000

# Hot Reload
HOT_RELOAD_ENABLED=true
HOT_RELOAD_WATCH_DIRS=./cmd,./internal

# =============================================================================
# TESTING CONFIGURATION
# =============================================================================

# Test Database
TEST_PG_HOST=localhost
TEST_PG_PORT=5433
TEST_PG_DB=loyalty_test
TEST_PG_USER=loyalty_test
TEST_PG_PASSWORD=loyalty_test

# Test Kafka
TEST_KAFKA_BROKERS=localhost:9093
TEST_KAFKA_CLIENT_ID=loyalty-test
TEST_KAFKA_GROUP_ID=loyalty-test

# =============================================================================
# PRODUCTION OVERRIDES
# =============================================================================

# Uncomment and set these for production deployments
# APP_ENVIRONMENT=production
# APP_LOG_LEVEL=warn
# JWT_SECRET=your-production-secret-key
# PG_PASSWORD=your-production-db-password
# KAFKA_BROKERS=kafka1.prod:9092,kafka2.prod:9092,kafka3.prod:9092
# OTEL_EXPORTER_OTLP_ENDPOINT=https://otel-collector.prod:4317
